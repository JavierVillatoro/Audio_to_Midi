https://github.com/JavierVillatoro/Audio_to_Midi

- Mirar concepto batch 
- Grafica de error (curva) y confusion matrix (falsos positivos etc) , entender el concepto bien
- Mirar concepto incertidumbre , como dar medida de incertidumbre sobre algo (con la varianza)
- ¿Como de confiable clasificador para cada clase?
- Calcular CDF / red neuronal bayesiana
- PROBAR LOS DOS , UNO DE DOS FASES OTRO DE UNA ( SILENCIO ,C4,D4,E4)

- Expande o reduce. Dependera de tu problema usar escala mel o no. Pensar si escala.

project/
│
├── data/
│     ├── voice_1.wav
│     ├── midi_1.mid
│     └── ...
│
├── scripts/
│     ├── extract_cqt.py
│     ├── midi_to_labels.py
│     ├── build_dataset.py
│     └── train_model.py   
│
├── utils/
│     ├── audio_utils.py
│     ├── midi_utils.py
│     └── dataset_utils.py
│
└── requirements.txt

audio.wav → extract_cqt.py
midi.mid  → midi_to_labels.py
X, Y → build_dataset.py
modelo.py → entrenar CRNN

Estrategias:
Procesar en ventanas
Divide el audio largo en ventanas de 4 segundos, las pasas por el modelo y luego concatenas los vectores de salida.
Es la más común y segura.

Cambiar a 1600 Hz y reducir hop
Quitar Padding , mi modelo tiene tamaño fijo.???? seguro?? 

Ver si puedo reducir bins en cqt.
Tengo que usar ventanas de mismo tamaño que el midi? 

Preguntas examen:
- Definir coeficientes cepstrales , escala mel. 
- Clasificador con knn.
- Modelo de prediccion lineal.


Comprobar que todos los midi son del mismo size (666)

Visualización de tus labels + CQT

Normalizar valores cqt. ----- PROBLEMA QUE VA DE UNO EN UNO , MEJOR GLOBAL PRIMERO.
optuna -- buscar funcion. 
scipy -- usar para confusion matrix 

LO QUE FALTA 
Buscar los mejores hiperparametros usando optuna_hiperperametros.py 
Entrenar el modelo con los parametros
Graficar epoch/error
Graficar confusion matrix 
Entender todo bien y hacer el modelo practico. 
Masking padding cuando se entrene para concatenar 4s 
Poner barra de tiempo para umap , muy lento n_l=5 min=0.01 // Va muy lento , solo para repre

Poder guardar el modelo o sus pesos antes de entrenarlo ----> best_crnn_model.pth

----OPTUNA HIPERPARAMETROS----
 Optimización Finalizada
---------------------------------------------------
Mejor Pérdida de Validación: 0.2006
Mejores Hiperparámetros:
  hidden_dim: 128
  lr: 0.0009341062209856291
  batch_size: 8